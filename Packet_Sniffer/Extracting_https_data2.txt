Sniffing HTTPS traffic to extract usernames and passwords is significantly more
    challenging than sniffing HTTP traffic due to encryption.
    HTTPS encrypts the data exchanged between the client and the server,
    meaning that without the proper decryption keys or methods,
    you cannot directly inspect the content of the requests, including the usernames
    and passwords.

However, there are a few approaches you could theoretically use to sniff and decrypt
    HTTPS traffic, but they come with legal, ethical, and technical implications.
    Here are the common methods:

1. Man-in-the-Middle (MITM) Attack Using a Proxy (e.g., Burp Suite or mitmproxy)

This technique involves intercepting and decrypting the HTTPS traffic by acting as a
    proxy between the client and the server. It works by generating a fake SSL
    certificate that is trusted by the client. This enables the proxy to decrypt
    and inspect the HTTPS traffic.

How to Set Up MITM Proxy for HTTPS:

    Set up a proxy server: Tools like Burp Suite or mitmproxy can intercept HTTPS traffic
         by acting as a middleman between the client and the server.

    Install the proxy's certificate on the client: The client must trust the MITM proxy's
        SSL certificate. This is typically done by installing the proxy’s root
        certificate into the client's certificate store (e.g., in browsers or on devices).

    Intercept traffic: Once the certificate is installed, the proxy server can intercept
        the HTTPS traffic, decrypt it, and allow you to inspect the raw HTTP request,
        including usernames, passwords, and other sensitive data.

    Use Scapy to intercept packets: After decryption, you can use Scapy or other packet
        sniffing tools to inspect the plain HTTP requests.

2. SSL/TLS Decryption on a Network Appliance (e.g., Firewalls, IDS)

In some cases, organizations deploy network devices such as firewalls or
    intrusion detection systems (IDS) that have SSL/TLS inspection capabilities.
    
    These devices can decrypt SSL/TLS traffic to inspect it for malicious activity.
    This is usually done on corporate networks and requires proper configuration.

3. SSL Key Logging in Browsers

Modern browsers (like Firefox and Chrome) support SSL key logging.
This method logs the keys used during the TLS handshake to decrypt HTTPS traffic.

    In Firefox and Chrome, you can set the environment variable SSLKEYLOGFILE
        to a location where the browser will store the keys.

    You can then use Wireshark or another packet analyzer to decrypt the traffic using
    these keys.

4. Server-Side SSL Decryption

If you have access to the server’s private key, you can potentially decrypt the SSL traffic server-side. However, this is generally only possible for debugging purposes and isn't a practical solution for regular packet sniffing.
Ethical and Legal Considerations:

    Consent: It's crucial to ensure that you have explicit permission to intercept and
        decrypt HTTPS traffic. Doing so without consent is illegal and unethical.

    Privacy: Intercepting and inspecting sensitive data, like usernames and passwords,
        can violate privacy regulations (e.g., GDPR, HIPAA).

    Network Policies: Many networks (including corporate or public networks) have
        policies against unauthorized packet sniffing, and doing so could result in severe
        consequences.

Example Using Burp Suite (as MITM Proxy):

Here’s how you could modify your approach to inspect HTTPS traffic using Burp Suite
    (MITM proxy) with Scapy:

    Set up Burp Suite:
        Install Burp Suite and configure it to act as a proxy on your local machine.
        Set Burp to listen on a specific port (e.g., 8080).

    Configure the Client (Browser or Application):
        Configure the browser or app to use Burp Suite's proxy.
        Install the Burp Suite CA certificate in the browser to avoid SSL warnings.

    Capture HTTPS Requests:
        Use Burp to capture HTTPS traffic.
        Burp Suite will decrypt the HTTPS traffic automatically.

    Extract Data:
        Look at the HTTP requests and responses in Burp’s interface.
        Identify any login credentials (username and password) that are passed in
        the headers or body.

    Use Scapy (optional):
        Once decrypted, you could theoretically use Scapy to further inspect traffic,
        though this is more commonly done with HTTP traffic.

Conclusion:

Directly sniffing HTTPS traffic without decryption is not possible due to the encryption.
You would need to use a man-in-the-middle approach, such as setting up a proxy or using
SSL key logging, to decrypt and inspect the traffic. These methods can only be used
legally with explicit permission and in environments where it is permitted.
Always be cautious and ensure that you're acting ethically and within legal
boundaries when working with network traffic.